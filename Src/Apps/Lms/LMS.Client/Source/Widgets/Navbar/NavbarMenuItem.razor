<div>
  <a href="@Url" class="">
      @Label
  </a>
</div>

@code {
  [Inject] private NavigationManager NavigationManager { get; set; } = default!;

  [Parameter, EditorRequired] public string Label { get; set; } = string.Empty;
  [Parameter, EditorRequired] public string Icon { get; set; } = string.Empty;
  [Parameter, EditorRequired] public string Url { get; set; } = string.Empty;

  private bool IsOpened { get; set; }

  protected override void OnInitialized()
  {
    NavigationManager.LocationChanged += HandleLocationChanged;
    IsOpened = GetIsActivePath(Url);
  }

  private bool GetIsActivePath(string relativePath)
  {
    string currentUri = NavigationManager.Uri;
    string uriToCheck = GetAbsolutePath(relativePath);
    bool startsWithFullPath = currentUri.StartsWith(uriToCheck, StringComparison.OrdinalIgnoreCase);
    bool isExactMatchOrSubpath = currentUri.Length >= uriToCheck.Length &&
                                 (currentUri.Length == uriToCheck.Length || currentUri[uriToCheck.Length] == '/');
    return startsWithFullPath && isExactMatchOrSubpath;
  }

  private void HandleLocationChanged(object? sender, LocationChangedEventArgs e) => StateHasChanged();

  private string GetAbsolutePath(string relativePath) =>
    new Uri(new(NavigationManager.BaseUri), relativePath).ToString();
}